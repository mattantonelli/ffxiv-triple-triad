<div class="row">
  <% if user_signed_in? %>
    <div class="col-12">
      <div class="text-right">
        <label for="toggle-completed" class="mb-1 mr-1">Hide Completed</label>
        <input type="checkbox" id="toggle-completed" />
      </div>
    </div>
  <% end %>
</div>
<table class="table table-striped table-sm shadow p-3 mb-5" id="npcs">
  <thead>
    <tr>
      <th scope="col"><%= sort_link(@q, :name) %></th>
      <th scope="col"><%= sort_link(@q, :location) %></th>
      <th scope="col">Rules</th>
      <th scope="col">Quest</th>
      <th scope="col">Rewards</th>
      <th scope="col" class="text-right"><%= sort_link(@q, :patch, [:patch, :id]) %></th>
    </tr>
  </thead>
  <tbody>
    <% @npcs.each do |npc| %>
      <tr <%= 'class="completed"'.html_safe unless @incomplete.include?(npc.id) %>>
        <td><%= link_to(npc.name, npc_path(npc), class: 'name') %></td>
        <td><%= location(npc) %></td>
        <td><%= npc.rules %></td>
        <td><%= quest(npc) %></td>
        <td>
          <div class="d-flex card-list">
            <% npc.rewards.each do |card| %>
              <div data-toggle="tooltip" data-placement="top" title="<%= card.name %>"
                <%= 'class="owned"'.html_safe if @user_cards.include?(card.id) %>>
                <%= small_image(card) %>
              </div>
            <% end %>
          </div>
        </td>
        <td class="text-right"><%= npc.patch %></td>
      </tr>
    <% end %>
  </tbody>
</table>
