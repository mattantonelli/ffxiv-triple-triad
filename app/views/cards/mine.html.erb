<% title('My Cards') %>

<%= javascript_tag "window._token = '#{form_authenticity_token}'" %>
<div class="row">
  <div class="col-6 col-xl-2 order-2 order-xl-1">
    <%= link_to 'Select Your Cards', select_cards_path,
      class: "btn btn-secondary btn-sm#{' btn-attention' if @user_cards.empty?}" %>
  </div>
  <div class="col-12 col-xl-8 order-1 order-xl-2 mb-2 mb-xl-0 text-center">
    <%= render 'form', url: my_cards_path %>
  </div>
  <div class="col-6 col-xl-2 order-3 d-flex align-items-end justify-content-end">
    <div class="d-flex align-items-center">
      <label for="toggle-owned" class="mb-0 mr-1">Hide Owned</label>
      <input type="checkbox" id="toggle-owned" />
    </div>
  </div>
</div>
<div class="progress mt-2">
  <div class="progress-bar" role="progressbar" style="width: <%= @completion %>%;"
    aria-valuenow="<%= @count %>" aria-valuemin="0" aria-valuemax="<%= @total %>">
    <b class="px-2"><%= @count %>/<%= @total %> (<%= @completion.to_i %>%)</b>
  </div>
</div>
<table class="table table-striped table-sm shadow p-3 mt-2 mb-5 sortable" id="my-cards">
  <thead>
    <tr>
      <th scope="col"></th> <!-- Image -->
      <th scope="col" class="hide-xs">Name</th>
      <th scope="col" class="pr-3">Type</th>
      <th scope="col">Rarity</th>
      <th scope="col" class="text-center">Stats</th>
      <th scope="col" class="hide-xs">Source</th>
      <th scope="col" class="text-right pr-3 hide-xs">Owned</th>
      <th scope="col" class="text-right pr-3">Patch</th>
      <th scope="col" class="text-center px-3"></th> <!-- Checkbox -->
    </tr>
  </thead>
  <tbody>
    <%= render 'table_data', cards: @cards, user_cards: @user_cards, ownership: @ownership %>
  </tbody>
</table>
